{% extends "base.html" %}

{% block content %}
<!-- Main form for email text input submission -->
<form method="POST" action="/process" onsubmit="return validateForm()">
    <div class="form-group">
        <label for="text_input">Email Text Input</label>
        
        <!-- Header with sample button and character counter for user guidance -->
        <div class="text-input-header">
            <!-- Sample button loads a realistic phishing email for testing purposes -->
            <button type="button" onclick="loadSampleEmail()" class="sample-btn">
                Load Sample Phishing Email
            </button>
            <!-- Real-time character counter with color coding based on limits -->
            <div id="char-counter" class="char-counter">0 characters</div>
        </div>
        
        <!-- Main textarea with comprehensive placeholder explaining usage -->
        <textarea id="text_input" name="text_input" placeholder="Paste your email content here...

Examples of what you can paste:
• Raw email text from your email client
• Complete email headers and body
• Forwarded email chains
• Suspicious phishing emails for analysis

The processor will extract and structure:
• Subject lines and sender information
• Recipient details (To, Cc, Bcc)
• Forensic data (Message-ID, Date, Reply-To)
• Clean message body content"></textarea>
        
        <!-- Information grid explaining processing capabilities and limitations -->
        <div class="input-info">
            <div class="info-item">
                <strong>Maximum size:</strong> 1MB (1,000,000 characters)
            </div>
            <div class="info-item">
                <strong>Processing:</strong> Extracts structured data for security analysis
            </div>
            <div class="info-item">
                <strong>Preserves:</strong> Headers needed for phishing detection
            </div>
            <div class="info-item">
                <strong>Removes:</strong> Technical noise and formatting clutter
            </div>
        </div>
    </div>

    <!-- Main submit button with loading state handling -->
    <button type="submit" class="submit-btn">Process Email Text</button>
</form>

<!-- Navigation section for additional features -->
<div class="navigation">
    <a href="/stats" class="nav-link">Performance Statistics</a>
</div>

<!-- API documentation section for developers -->
<div class="api-info">
    <h3>API Usage Examples</h3>
    <div class="api-examples">
        <!-- Simple API endpoint documentation -->
        <div class="api-example">
            <h4>Simple API (Returns plain text)</h4>
            <code>POST /api/process</code>
            <pre>curl -X POST -H "Content-Type: application/json" \
  -d '{"text":"Subject: Test\nFrom: test@example.com\nHello world"}' \
  http://localhost:5000/api/process</pre>
        </div>
        
        <!-- Detailed API endpoint documentation -->
        <div class="api-example">
            <h4>Detailed API (Returns JSON with metadata)</h4>
            <code>POST /api/process_detailed</code>
            <pre>curl -X POST -H "Content-Type: application/json" \
  -d '{"text":"Subject: Test\nFrom: test@example.com\nHello world"}' \
  http://localhost:5000/api/process_detailed</pre>
        </div>
    </div>
</div>
{% endblock %}